import"../chunks/chunks/vendor/bootstrap.DA4YfA_0.js";import{I as n}from"../common/imageCropper.js";import"../chunks/chunks/vendor/common.Dz0GDR6V.js";console.log("Products cropper init loading...");const p={initialized:!1,init:function(){if(this.initialized){console.log("ProductsCropper already initialized, skipping");return}console.log("ProductsCropper.init() called"),window.ImageCropper&&typeof window.ImageCropper.init=="function"?(console.log("Found global ImageCropper, initializing with it"),window.ImageCropper.init({fileInputSelector:'input[type="file"]',modalSelector:"#cropperModal",cropperImageSelector:"#cropper-image",cropButtonSelector:"#crop-image-button",previewSelector:"#preview-image",previewContainerSelector:"#preview-container",croppedDataInputSelector:"#cropped-image-data",cropperOptions:{aspectRatio:1,viewMode:1,autoCropArea:.8,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,responsive:!0,background:!1,guides:!1,highlight:!1,cropBoxResizable:!0,cropBoxMovable:!0}})):n&&typeof n.init=="function"?(console.log("Using imported ImageCropper"),n.init({fileInputSelector:'input[type="file"]',modalSelector:"#cropperModal",cropperImageSelector:"#cropper-image",cropButtonSelector:"#crop-image-button",previewSelector:"#preview-image",previewContainerSelector:"#preview-container",croppedDataInputSelector:"#cropped-image-data",cropperOptions:{aspectRatio:1,viewMode:1,autoCropArea:.8,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,responsive:!0,background:!1,guides:!1,highlight:!1,cropBoxResizable:!0,cropBoxMovable:!0}})):console.error("ImageCropper not available globally or as import"),document.addEventListener("change",function(o){if(o.target&&o.target.type==="file"){const r=o.target.files;if(r&&r.length>0){const e=document.getElementById("image-name");e&&(e.textContent=r[0].name,e.classList.remove("hidden"))}}}),this.initialized=!0,console.log("ProductsCropper initialization complete")},cleanUp:function(){window.ImageCropper&&typeof window.ImageCropper.cleanUp=="function"&&window.ImageCropper.cleanUp(),this.initialized=!1}};window.ProductsCropper=p;console.log("ProductsCropper explicitly exposed globally");document.addEventListener("DOMContentLoaded",function(){console.log("DOM loaded in products cropper_init.js - setting up MutationObserver");const o=new MutationObserver(function(r){r.forEach(function(e){if(e.addedNodes&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){const i=e.addedNodes[t];if(i.id==="cropperModal"||i.querySelector&&i.querySelector("#cropperModal")){console.log("Cropper modal detected in DOM, initializing cropper..."),setTimeout(()=>{p.init()},100),o.disconnect();return}}})});o.observe(document.body,{childList:!0,subtree:!0}),document.addEventListener("cropperElementsReady",function(){console.log("cropperElementsReady event received"),p.init()})});
