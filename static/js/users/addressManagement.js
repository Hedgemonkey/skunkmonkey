document.addEventListener("DOMContentLoaded",function(){var c,l;const a=((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||((l=document.querySelector("[name=csrfmiddlewaretoken]"))==null?void 0:l.value);document.querySelectorAll(".btn-delete-address").forEach(t=>{t.addEventListener("click",function(s){s.preventDefault();const r=this.dataset.addressId,o=this.dataset.deleteUrl||`/users/addresses/delete/${r}/`,n=this.dataset.addressInfo;Swal.fire({title:"Are you sure?",text:`Do you really want to delete the address "${n}"? This cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"}).then(d=>{d.isConfirmed&&fetch(o,{method:"POST",headers:{"X-CSRFToken":a,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success?Swal.fire("Deleted!",e.message||"Address has been deleted.","success").then(()=>{window.location.reload()}):Swal.fire("Error!",e.message||"Could not delete address.","error")}).catch(e=>{console.error("Error:",e),Swal.fire("Error!","An unexpected error occurred.","error")})})})}),document.querySelectorAll(".btn-set-default, .btn-set-default-address").forEach(t=>{t.addEventListener("click",function(s){s.preventDefault();const r=this.dataset.addressId,o=this.dataset.setdefaultUrl||`/users/addresses/set_default/${r}/`,n=this.dataset.addressInfo;Swal.fire({title:"Set as Default?",text:`Set "${n}" as your default delivery address?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, set as default!"}).then(d=>{d.isConfirmed&&fetch(o,{method:"POST",headers:{"X-CSRFToken":a,"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{e.success?Swal.fire("Success!",e.message||"Address set as default.","success").then(()=>{window.location.reload()}):Swal.fire("Error!",e.message||"Could not set default address.","error")}).catch(e=>{console.error("Error:",e),Swal.fire("Error!","An unexpected error occurred.","error")})})})})});
