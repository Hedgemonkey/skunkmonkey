<!-- products/templates/includes/filter_controls.html -->
{% load static %}

<div class="filter-controls mb-4">
    <div class="row g-3">
        <div class="col-12 col-md-4">
            <div class="input-group">
                <input type="text" 
                       class="form-control filter-search" 
                       placeholder="Search {{ item_type|default:'products' }}..."
                       {% if search %}value="{{ search }}"{% endif %}>
                <button class="btn btn-outline-secondary clear-search" type="button">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        {% if show_category_filter %}
        <div class="col-12 col-md-4">
            <div class="category-filter-container">
                <select class="form-select filter-category" multiple data-placeholder="Select categories">
                    {% for category in categories %}
                        <option value="{{ category.id }}"
                                {% if category.id in selected_categories %}selected{% endif %}>
                            {{ category.name }}
                        </option>
                    {% endfor %}
                </select>
                <div class="selected-categories-display mt-1 d-flex justify-content-between align-items-center">
                    <small class="text-muted">Selected: <span class="category-count">{{ selected_categories|length }}</span></small>
                    <div class="category-action-buttons">
                        <button class="btn btn-sm btn-outline-secondary clear-categories-btn" type="button">
                            Clear Selection
                        </button>
                        {% if item_type == 'categories' %}
                        <button class="btn btn-sm btn-outline-primary list-products-btn" type="button">
                            List Products
                        </button>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        <div class="col-12 col-md-4">
            <select class="form-select filter-sort">
                {% for option in sort_options %}
                    <option value="{{ option.value }}"
                            {% if current_sort == option.value %}selected{% endif %}>
                        {{ option.label }}
                    </option>
                {% endfor %}
            </select>
        </div>
    </div>
</div>
