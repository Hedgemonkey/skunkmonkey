import{A as c}from"./apiClient.js";import{B as d}from"./baseManager.js";import{S as a}from"./vendor-common.B4uieipM.js";import"./ajax_helper.77meLuHN.js";class l extends d{constructor(t={}){super({...t,itemType:"product",notifications:t.notifications||{displaySuccess:r=>{a.fire({title:"Success",text:r,icon:"success",confirmButtonColor:"#0d6efd"})},displayError:r=>{a.fire({title:"Error",text:r,icon:"error",confirmButtonColor:"#0d6efd"})}}}),this.options={productGridSelector:"#product-grid",categoryFilterSelector:".category-filter",searchFormSelector:"#product-search-form",sortSelectSelector:"#sort-select",paginationSelector:".pagination",...t},this.initSortingControls(),this.initProductCardAnimations()}fetchItems(){console.log("Catalog navigation handled through URL changes")}initSortingControls(){const t=document.querySelector(this.options.sortSelectSelector);if(t){t.addEventListener("change",e=>{this.sortProducts(e.target.value)});const o=new URLSearchParams(window.location.search).get("sort");o&&(t.value=o)}}initializeFilters(){}sortProducts(t){const r=new URL(window.location.href);r.searchParams.set("sort",t),window.location.href=r.toString()}initProductCardAnimations(){const t=document.querySelector(this.options.productGridSelector);if(!t)return;const r=t.querySelectorAll(".product-card");if("IntersectionObserver"in window){const o={threshold:.1,rootMargin:"0px 0px -100px 0px"},e=new IntersectionObserver((s,n)=>{s.forEach(i=>{i.isIntersecting&&(i.target.classList.add("appear"),n.unobserve(i.target))})},o);r.forEach(s=>{s.classList.add("fade-in"),e.observe(s)})}else r.forEach(o=>{o.classList.add("appear")})}addToWishlist(t,r){const o=`/shop/wishlist/add/${t}/`;new c().get(o).then(e=>{e.success&&(r.classList.add("added"),r.innerHTML='<i class="fas fa-heart"></i>',this.options.notifications.displaySuccess("Product has been added to your wishlist."))}).catch(e=>{console.error("Error:",e),this.options.notifications.displayError("There was a problem adding to your wishlist.")})}}document.addEventListener("DOMContentLoaded",()=>{window.catalogManager=new l});
