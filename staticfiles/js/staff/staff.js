const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/chunks/chunks/vendor/bootstrap.DA4YfA_0.js","js/chunks/chunks/vendor/common.Dz0GDR6V.js","css/common/chunks/vendor/common.css","css/common/chunks/vendor/bootstrap.css"])))=>i.map(i=>d[i]);
/* empty css                      */import{l as h,b,c as y,e as E,g as C,h as v,a as w,i as L,j as S,k as x,m as B,n as k,o as I,s as P,t as A,u as D,v as T,w as $,x as M,y as O,z as _,A as j,B as q,C as F,D as N,E as R,F as U,d as J}from"../chunks/chunks/vendor/fontawesome.z_C5Drto.js";const z="modulepreload",H=function(l){return"/static/"+l},f={},V=function(t,a,r){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(e==null?void 0:e.nonce)||(e==null?void 0:e.getAttribute("nonce"));o=Promise.allSettled(a.map(i=>{if(i=H(i),i in f)return;f[i]=!0;const d=i.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${m}`))return;const c=document.createElement("link");if(c.rel=d?"stylesheet":z,d||(c.as="script"),c.crossOrigin="",c.href=i,n&&c.setAttribute("nonce",n),document.head.appendChild(c),d)return new Promise((g,p)=>{c.addEventListener("load",g),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${i}`)))})}))}function s(e){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=e,window.dispatchEvent(n),!n.defaultPrevented)throw e}return o.then(e=>{for(const n of e||[])n.status==="rejected"&&s(n.reason);return t().catch(s)})};let u=null;class G{constructor(){this.init()}async init(){try{u=await V(()=>import("../chunks/chunks/vendor/bootstrap.DA4YfA_0.js").then(t=>t.b),__vite__mapDeps([0,1,2,3]))}catch(t){console.error("Error loading Bootstrap:",t)}document.addEventListener("DOMContentLoaded",()=>{this.loadLowStockProducts(),this.initImportExport()})}loadLowStockProducts(){const t=document.getElementById("low-stock-container");if(!t)return;const a=t.querySelector(".spinner-container"),r=document.getElementById("low-stock-table-body");a.classList.remove("d-none"),fetch("/staff/api/products/low-stock/").then(o=>o.json()).then(o=>{if(a.classList.add("d-none"),o.products&&o.products.length>0){let s="";o.products.forEach(e=>{s+=`
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <img src="${e.image_url||"/static/assets/images/noimage.png"}"
                                            alt="${e.name}" class="me-2 product-thumbnail">
                                        <span>${e.name}</span>
                                    </div>
                                </td>
                                <td>${e.category_name}</td>
                                <td>$${e.price}</td>
                                <td class="${e.stock_quantity===0?"text-danger":"text-warning"}">
                                    ${e.stock_quantity===0?'<i class="fas fa-exclamation-circle text-danger me-1"></i>':'<i class="fas fa-exclamation-triangle text-warning me-1"></i>'}
                                    ${e.stock_quantity}
                                </td>
                                <td>
                                    <div class="btn-group">
                                        <a href="/staff/products/${e.id}/" class="btn btn-sm btn-info">
                                            <i class="fas fa-eye"></i>
                                        </a>
                                        <a href="/staff/products/${e.id}/update/" class="btn btn-sm btn-primary">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        `}),r.innerHTML=s}else r.innerHTML=`
                        <tr>
                            <td colspan="5" class="text-center py-3">No low stock products found</td>
                        </tr>
                    `}).catch(o=>{console.error("Error loading low stock products:",o),a.classList.add("d-none"),r.innerHTML=`
                    <tr>
                        <td colspan="5" class="text-center py-3 text-danger">
                            Error loading low stock products
                        </td>
                    </tr>
                `})}initImportExport(){const t=document.getElementById("import-products-btn"),a=document.getElementById("export-products-btn"),r=document.getElementById("importProductsModal");if(!t||!a||!r)return;const o=new u.Modal(r);t.addEventListener("click",e=>{e.preventDefault(),o.show()}),a.addEventListener("click",e=>{e.preventDefault(),window.location.href="/staff/api/products/export/"});const s=document.getElementById("submitImportBtn");s&&s.addEventListener("click",()=>{const e=document.getElementById("importProductsForm");new FormData(e),e.submit()})}}const Z=new G;h.add(b,y,E,C,v,w,L,S,x,B,k,I,P,A,D,T,$,M,O,_,j,q,F,N,R,U);J.watch();class Q{constructor(){this.initEventListeners(),this.initBootstrapComponents(),this.dashboard=Z,this.fixVendorChunkErrors(),this.initCharts()}fixVendorChunkErrors(){window.addEventListener("error",t=>{if(t.target&&t.target.tagName==="SCRIPT"&&t.target.src&&t.target.src.includes("vendor-CQZYIS0i.js"))return console.log("Fixed vendor chunk error for:",t.target.src),this.loadChartsOnDemand(),t.preventDefault(),!0},!0)}initCharts(){document.addEventListener("DOMContentLoaded",()=>{this.loadChartsOnDemand()})}async loadChartsOnDemand(){const t=document.getElementById("categoryChart"),a=document.getElementById("priceChart");if(!(!t&&!a)){if(typeof Chart>"u"){console.log("Loading Chart.js from CDN");try{await new Promise((r,o)=>{const s=document.createElement("script");s.src="https://cdn.jsdelivr.net/npm/chart.js@4.4.9/dist/chart.umd.min.js",s.onload=r,s.onerror=o,document.head.appendChild(s)}),console.log("Chart.js loaded successfully")}catch(r){console.error("Failed to load Chart.js:",r);return}}this.renderCharts()}}renderCharts(){if(typeof Chart>"u"){console.error("Chart.js not available");return}const t=document.getElementById("categoryChart");if(t)try{const r=t.getAttribute("data-labels")||"[]",o=t.getAttribute("data-values")||"[]";console.log("Category chart data:",{labels:r,values:o});const s=JSON.parse(r),e=JSON.parse(o),n=t.getContext("2d");new Chart(n,{type:"doughnut",data:{labels:s,datasets:[{data:e,backgroundColor:["#4e73df","#1cc88a","#36b9cc","#f6c23e","#e74a3b","#6f42c1","#fd7e14","#20c9a6","#5a5c69","#84a0c6"],hoverOffset:4}]},options:{responsive:!0,plugins:{legend:{position:"right"}}}}),console.log("Category chart rendered successfully")}catch(r){console.error("Failed to render category chart:",r)}const a=document.getElementById("priceChart");if(a)try{const r=a.getAttribute("data-labels")||"[]",o=a.getAttribute("data-values")||"[]";console.log("Price chart data:",{labels:r,values:o});const s=JSON.parse(r),e=JSON.parse(o),n=a.getContext("2d");new Chart(n,{type:"bar",data:{labels:s,datasets:[{label:"Products by Price Range",data:e,backgroundColor:"#4e73df"}]},options:{responsive:!0,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Number of Products"}},x:{title:{display:!0,text:"Price Range"}}}}}),console.log("Price chart rendered successfully")}catch(r){console.error("Failed to render price chart:",r)}}initEventListeners(){document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("sidebarToggle"),a=document.getElementById("staffSidebar");t&&a&&(t.addEventListener("click",()=>{a.classList.toggle("show")}),document.addEventListener("click",o=>{!(a.contains(o.target)||t.contains(o.target))&&a.classList.contains("show")&&a.classList.remove("show")})),document.querySelectorAll(".alert-success").forEach(o=>{setTimeout(()=>{typeof bootstrap<"u"&&bootstrap.Alert?new bootstrap.Alert(o).close():o.style.display="none"},5e3)}),this.initDeleteStaffModal()})}initBootstrapComponents(){document.addEventListener("DOMContentLoaded",()=>{if(typeof bootstrap>"u"){console.warn("Bootstrap is not available");return}try{[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(a=>new bootstrap.Tooltip(a))}catch(t){console.warn("Failed to initialize tooltips:",t)}try{[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(a=>new bootstrap.Popover(a))}catch(t){console.warn("Failed to initialize popovers:",t)}})}initDeleteStaffModal(){const t=document.getElementById("deleteStaffModal");t&&t.addEventListener("show.bs.modal",function(a){const r=a.relatedTarget,o=r.getAttribute("data-staff-id"),s=r.getAttribute("data-staff-name");document.getElementById("staff-name-to-delete").textContent=s,document.getElementById("delete-staff-form").action=`/staff/staff/${o}/delete/`})}}new Q;
