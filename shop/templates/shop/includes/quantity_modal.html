{% load static %}

<!-- Quantity Selection Modal -->
<div class="modal fade"
     id="quantityModal"
     tabindex="-1"
     aria-labelledby="quantityModalLabel"
     aria-describedby="quantityModalDescription"
     aria-hidden="true"
     role="dialog">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title h5" id="quantityModalLabel">
                    <i class="fas fa-shopping-cart me-2" aria-hidden="true"></i>
                    Add to Cart
                </h2>
                <button type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close dialog"></button>
            </div>
            <div class="modal-body">
                <div id="quantityModalDescription" class="visually-hidden">
                    Select the quantity of this product to add to your shopping cart
                </div>
                <div class="row align-items-start">
                    <div class="col-4">
                        <img id="modal-product-image"
                             src="data:image/svg+xml,%3csvg%20width='100'%20height='100'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='100%25'%20height='100%25'%20fill='%23f8f9fa'/%3e%3ctext%20x='50%25'%20y='50%25'%20font-size='14'%20text-anchor='middle'%20dy='.3em'%20fill='%236c757d'%3eImage%3c/text%3e%3c/svg%3e"
                             alt="Product image placeholder"
                             class="img-fluid rounded shadow-sm">
                    </div>
                    <div class="col-8">
                        <h3 id="modal-product-name" class="mb-2 fw-bold h6">Product Name</h3>
                        <dl class="mb-2">
                            <dt class="text-muted d-inline">Price:</dt>
                            <dd id="modal-product-price" class="text-success fw-bold fs-5 d-inline ms-1">Â£</dd>
                        </dl>
                        <dl class="mb-3">
                            <dt class="text-muted d-inline">Stock:</dt>
                            <dd id="modal-stock-info" class="ms-1 d-inline"></dd>
                        </dl>

                        <form id="quantity-selection-form"
                              aria-labelledby="quantityModalLabel"
                              novalidate>
                            {% csrf_token %}
                            <fieldset class="mb-3">
                                <legend class="form-label fw-bold">Select Quantity</legend>
                                <div class="input-group quantity-selector"
                                     role="group"
                                     aria-labelledby="modal-quantity-label">
                                    <button class="btn btn-outline-secondary"
                                            type="button"
                                            id="modal-decrease-quantity"
                                            aria-label="Decrease quantity by 1"
                                            aria-describedby="modal-quantity-help">
                                        <i class="fas fa-minus" aria-hidden="true"></i>
                                    </button>
                                    <input type="number"
                                           id="modal-quantity"
                                           name="quantity"
                                           class="form-control text-center fw-bold"
                                           value="1"
                                           min="1"
                                           max="1"
                                           aria-label="Quantity to add to cart"
                                           aria-describedby="modal-quantity-help"
                                           required>
                                    <button class="btn btn-outline-secondary"
                                            type="button"
                                            id="modal-increase-quantity"
                                            aria-label="Increase quantity by 1"
                                            aria-describedby="modal-quantity-help">
                                        <i class="fas fa-plus" aria-hidden="true"></i>
                                    </button>
                                </div>
                                <div id="modal-quantity-help" class="form-text">
                                    Use the buttons or type the quantity directly
                                </div>
                            </fieldset>
                            <input type="hidden" id="modal-product-id" name="product_id" value="">
                            <input type="hidden" name="update" value="False">
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                        aria-label="Cancel and close dialog">
                    <i class="fas fa-times me-1" aria-hidden="true"></i>
                    Cancel
                </button>
                <button type="button"
                        class="btn btn-primary"
                        id="confirm-add-to-cart"
                        aria-describedby="add-to-cart-description">
                    <i class="fas fa-shopping-cart me-1" aria-hidden="true"></i>
                    Add to Cart
                </button>
                <div id="add-to-cart-description" class="visually-hidden">
                    This will add the selected quantity to your shopping cart and close the dialog
                </div>
            </div>
        </div>
    </div>
</div>
